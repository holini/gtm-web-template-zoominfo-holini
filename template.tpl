___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Zoominfo Pixel",
  "description": "A template for setting up zoomInfo Pixel.",
  "categories": [
    "MARKETING",
    "UTILITY"
  ],
  "brand": {
    "id": "github.com_holini",
    "displayName": "Holini",
    "thumbnail": "data:image/png;base64,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"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "sourceUrl",
    "displayName": "Snippet Source URL",
    "simpleValueType": true,
    "help": "Copy the url from the Snippet window",
    "valueValidators": [
      {
        "type": "REGEX",
        "args": [
          "^https:\\/\\/.*\\.zoominfo\\.com\\/pixel\\/.*"
        ],
        "errorMessage": "The URL should look like https://ws.zoominfo.com/pixel/7AWEf5S8Ty8utpoDS65a"
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "debug",
    "checkboxText": "Debug",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const logToConsole = require('logToConsole');
const injectScript = require('injectScript');
const queryPermission = require('queryPermission');
const url = data.sourceUrl;
const log = data.debug ? logToConsole : (() => {});

log('Zoominfo: Loading script from ' + url);
const onSuccess = () => {
  log('Zoominfo: Script loaded successfully.');
  data.gtmOnSuccess();
};
const onFailure = () => {
  log('Zoominfo: Script load failed.');
  data.gtmOnFailure();};

if (queryPermission('inject_script', url)) {
  injectScript(url, onSuccess, onFailure);
} else {
  log('Zoominfo: Script load failed due to permissions mismatch.');
  data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.zoominfo.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 10/03/2021, 18:37:56


